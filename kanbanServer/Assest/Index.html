<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<link rel="stylesheet" href="/Assest/Styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css" integrity="sha256-XoaMnoYC5TH6/+ihMEnospgm0J1PM/nioxbOUdnM8HY=" crossorigin="anonymous">-->
    <title>Tablero Kanban</title>
    <style>

                * {
                    border: 0;
                    margin: 0;
                }
                /* Index */

                header {
                    width: 100%;
                    background: #007bff;
                    color: white;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 10px 20px;
                    position: fixed;
                    top: 0;
                    /* left: 0; */
                    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                    z-index: 1000;
                }

                .desplegable {
                    display: flex;
                    gap: 10px;
                }

                    .desplegable a {
                        color: white;
                        text-decoration: none;
                        padding: 4px;
                    }

                h3 {
                    text-align: center;
                }

                body {
                    font-family: Arial, sans-serif;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    background-color: #f4f4f4;
                    overflow: hidden; /* Evita el scroll */
                    margin: 0;
                }

                .kanban {
                    display: flex;
                    gap: 20px;
                }

                .column {
                    background: white;
                    padding: 10px;
                    width: 200px;
                    height: 75vh;
                    min-height: 300px;
                    border-radius: 5px;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                }

                .task {
                    background: #e3e3e3;
                    padding: 10px;
                    margin: 10px 0;
                    border-radius: 3px;
                    cursor: grab;
                    display: grid;
                    justify-content: space-between;
                    position: relative;
                }

                    .task h4, .task h6, .task p {
                        padding: 2px;
                    }

                    .task p {
                        font-size: 0.8rem;
                    }

                    .task a {
                        text-decoration: none;
                        display: flex;
                        justify-content: end;
                        font-size: 1rem;
                        position: absolute;
                        right: 0;
                        bottom: 0;
                        padding: 5px;
                        color: #000;
                    }

                        .task a:hover {
                            color: #007bff;
                        }

                .fa .fa-pencil-square-o {
                    font-size: 1rem;
                    color: #000;
                }

                .add {
                    position: absolute;
                    /* bottom: 2vh;
                    right: 2vh; */
                    right: 4vh;
                    bottom: 4vh;
                    background: #007bff;
                    color: white;
                    font-size: 24px;
                    text-decoration: none;
                    width: 50px;
                    height: 50px;
                    display: flex;
                    justify-content: center;
                    align-self: end;
                    align-items: center;
                    border-radius: 50%;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
                }
                /*add-edit*/
                .card {
                    background-color: #e3e3e3;
                    /* width:70vw;
        height: 50vh; */
                    border-radius: 10px;
                    display: grid;
                    padding: 20px;
                    /* text-align: center; */
                    align-items: center;
                }

                    .card p {
                        padding: 5px;
                        font-size: 1.2rem;
                        color: #000;
                    }

                    .card input {
                        padding: 5px;
                        margin: 10px;
                    }

                .buttons {
                    display: flex;
                    justify-content: center;
                }

                button {
                    width: 20vw;
                    border-radius: 5px;
                    margin: 10px;
                    padding: 5px;
                    cursor: pointer;
                }

                    button:last-of-type {
                        background-color: #007bff;
                    }

                .eliminar {
                    background: rgb(250, 54, 54);
                }
                /*login*/
                .login {
                    display: grid;
                    align-items: center;
                    /* height: 50vh;
            width: 40vw; */
                    border-radius: 5px;
                    background-color: #007bff;
                    color: white;
                    padding: 20px;
                }

                    .login input {
                        padding: 5px;
                        margin: 10px;
                    }

                    .login h2 {
                        text-align: center;
                    }

                    .login label {
                        padding: 10px;
                        font-size: 1.1rem;
                    }

                    .login button {
                        width: 20vw;
                        margin: 10px;
                        padding: 5px;
                        background-color: #0061c9;
                        color: white;
                    }

                * {
                    border: 0;
                    margin: 0;
                }
                /* Index */

                header {
                    width: 100%;
                    background: #007bff;
                    color: white;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 10px 20px;
                    position: fixed;
                    top: 0;
                    /* left: 0; */
                    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                    z-index: 1000;
                }

                .desplegable {
                    display: flex;
                    gap: 10px;
                }

                    .desplegable a {
                        color: white;
                        text-decoration: none;
                        padding: 4px;
                    }

                h3 {
                    text-align: center;
                }

                body {
                    font-family: Arial, sans-serif;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    background-color: #f4f4f4;
                    overflow: hidden; /* Evita el scroll */
                    margin: 0;
                }

                .kanban {
                    display: flex;
                    gap: 20px;
                }

                .column {
                    background: white;
                    padding: 10px;
                    width: 200px;
                    height: 75vh;
                    min-height: 300px;
                    border-radius: 5px;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                }

                .task {
                    background: #e3e3e3;
                    padding: 10px;
                    margin: 10px 0;
                    border-radius: 3px;
                    cursor: grab;
                    display: grid;
                    justify-content: space-between;
                    position: relative;
                }

                    .task h4, .task h6, .task p {
                        padding: 2px;
                    }

                    .task p {
                        font-size: 0.8rem;
                    }

                    .task a {
                        text-decoration: none;
                        display: flex;
                        justify-content: end;
                        font-size: 1rem;
                        position: absolute;
                        right: 0;
                        bottom: 0;
                        padding: 5px;
                        color: #000;
                    }

                        .task a:hover {
                            color: #007bff;
                        }

                .fa .fa-pencil-square-o {
                    font-size: 1rem;
                    color: #000;
                }

                .add {
                    position: absolute;
                    /* bottom: 2vh;
                    right: 2vh; */
                    right: 4vh;
                    bottom: 4vh;
                    background: #007bff;
                    color: white;
                    font-size: 24px;
                    text-decoration: none;
                    width: 50px;
                    height: 50px;
                    display: flex;
                    justify-content: center;
                    align-self: end;
                    align-items: center;
                    border-radius: 50%;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
                }
                /*add-edit*/
                .card {
                    background-color: #e3e3e3;
                    /* width:70vw;
        height: 50vh; */
                    border-radius: 10px;
                    display: grid;
                    padding: 20px;
                    /* text-align: center; */
                    align-items: center;
                }

                    .card p {
                        padding: 5px;
                        font-size: 1.2rem;
                        color: #000;
                    }

                    .card input {
                        padding: 5px;
                        margin: 10px;
                    }

                .buttons {
                    display: flex;
                    justify-content: center;
                }

                button {
                    width: 20vw;
                    border-radius: 5px;
                    margin: 10px;
                    padding: 5px;
                    cursor: pointer;
                }

                    button:last-of-type {
                        background-color: #007bff;
                    }

                .eliminar {
                    background: rgb(250, 54, 54);
                }
                /*login*/
                .login {
                    display: grid;
                    align-items: center;
                    /* height: 50vh;
            width: 40vw; */
                    border-radius: 5px;
                    background-color: #007bff;
                    color: white;
                    padding: 20px;
                }

                    .login input {
                        padding: 5px;
                        margin: 10px;
                    }

                    .login h2 {
                        text-align: center;
                    }

                    .login label {
                        padding: 10px;
                        font-size: 1.1rem;
                    }

                    .login button {
                        width: 20vw;
                        margin: 10px;
                        padding: 5px;
                        background-color: #0061c9;
                        color: white;
                    }
    </style>
</head>
<body class="body">
    <header>

        <h1></h1>
        <nav class="desplegable">
            <a href="#">Cerrar</a>
        </nav>
    </header>
    <main>
        <div class="kanban">
            <div class="column" id="todo" ondrop="drop(event)" ondragover="allowDrop(event)">
                <h3>Pendiente</h3>
               

            </div>
            <div class="column" id="inprogress" ondrop="drop(event)" ondragover="allowDrop(event)">
                <h3>En progreso</h3>
            </div>
            <div class="column" id="done" ondrop="drop(event)" ondragover="allowDrop(event)">
                <h3>Completado</h3>
            </div>
        </div>
        <a href="#" class="add" id="agregar">+</a>
    </main>
    <script>

        let name = sessionStorage.getItem("playName");
        document.getElementById("agregar").addEventListener("click",agregarNota)
        if (!name) {
            name = prompt("¿Cuál es tu nombre?");
            sessionStorage.setItem("playName", name);
            try
            {
                let json = { Nombre: name };
                fetch("/kanban/nuevo", {
                    method: "POST",
                    body: JSON.stringify(json),
                    headers: {
                        "Content-Type": "application/json"
                    }
                });
            }
              catch (error) {
                  console.log(error);
                  alert(error);
              }
        }
        function agregarNota() {
            let task = document.createElement("section");
            task.className = "task";
            task.draggable = true;
            task.ondragstart = drag;
            task.id = "task" + (document.querySelectorAll(".task").length + 1);
            task.innerHTML = `
                <h4>Título de la Tarjeta</h4>
                <h6>Fecha de creación</h6>
                <p>Descripción de la tarjeta.</p>
                <a href="#"><i class="fa fa-trash" aria-hidden="true"></i></a>
            `;
            document.getElementById("todo").appendChild(task);
        }
        //tabla
        function allowDrop(event) {
            event.preventDefault();
        }
        function drag(event) {
            event.dataTransfer.setData("text", event.target.id);
        }
        function drop(event) {
            event.preventDefault();
            var data = event.dataTransfer.getData("text");
            event.target.appendChild(document.getElementById(data));
        }
        
    </script>
</body>
</html>
